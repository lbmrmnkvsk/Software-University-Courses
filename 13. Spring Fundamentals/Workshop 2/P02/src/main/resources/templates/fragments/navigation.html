<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">

<header th:fragment="navigation">
    <nav class="main-nav">
        <ul>
            <li><a th:href="@{/home}">Home</a></li>
            <!-- Profile link visible only when the user is authenticated -->
            <li sec:authorize="isAuthenticated()"><a th:href="@{/users/profile}">Profile</a></li>
            <!-- Admin link visible only when the user has ADMIN role -->
            <li sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/admin}">Admin</a></li>
            <!-- Login link visible only when the user is not authenticated -->
            <li sec:authorize="!isAuthenticated()"><a th:href="@{/users/login}">Login</a></li>
            <!-- Register link visible only when the user is not authenticated -->
            <li sec:authorize="!isAuthenticated()"><a th:href="@{/users/register}">Register</a></li>
            <li sec:authorize="isAuthenticated()"><a th:href="@{/routes}">Routes</a></li>
            <!-- Logout link visible only when the user is authenticated -->
            <li sec:authorize="isAuthenticated()">
                <form th:action="@{/users/logout}" method="post">
                    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
                    <button type="submit">Logout</button>
                </form>
            </li>
        </ul>
    </nav>
</header>
